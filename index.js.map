{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * Project: velaro-tix.blog\n * Style: Digital Gazette (AI for People)\n * Year: 2026\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    // --- 1. ИНИЦИАЛИЗАЦИЯ БИБЛИОТЕК ---\n\n    // Плавный скролл Lenis\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // Иконки Lucide\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // Регистрация GSAP ScrollTrigger\n    gsap.registerPlugin(ScrollTrigger);\n\n\n    // --- 2. МОБИЛЬНОЕ МЕНЮ (Full Overlay) ---\n\n    const burger = document.querySelector('.burger');\n    const nav = document.querySelector('.nav');\n    const navLinks = document.querySelectorAll('.nav__link');\n    const body = document.body;\n\n    const toggleMenu = () => {\n        const isActive = nav.classList.contains('nav--active');\n        burger.classList.toggle('burger--active');\n        nav.classList.toggle('nav--active');\n        \n        // Блокировка прокрутки фона\n        body.style.overflow = isActive ? '' : 'hidden';\n\n        // Анимация ссылок в меню\n        if (!isActive) {\n            gsap.fromTo('.nav__link', \n                { y: 30, opacity: 0 }, \n                { y: 0, opacity: 1, duration: 0.5, stagger: 0.1, ease: \"power3.out\", delay: 0.3 }\n            );\n        }\n    };\n\n    burger?.addEventListener('click', toggleMenu);\n\n    // Закрытие при клике на якорь\n    navLinks.forEach(link => {\n        link.addEventListener('click', () => {\n            if (nav.classList.contains('nav--active')) toggleMenu();\n        });\n    });\n\n\n    // --- 3. АНИМАЦИИ ЗАГОЛОВКОВ (Без разрыва слов) ---\n\n    const splitTitles = document.querySelectorAll('#hero-title, .section-title');\n    \n    splitTitles.forEach(title => {\n        // Создаем иерархию: Слово > Буква. Это предотвращает разрыв слов.\n        const text = new SplitType(title, { types: 'words, chars' });\n\n        gsap.from(text.chars, {\n            scrollTrigger: {\n                trigger: title,\n                start: \"top 85%\",\n                toggleActions: \"play none none none\"\n            },\n            opacity: 0,\n            y: 20,\n            rotateX: -45,\n            stagger: 0.02,\n            duration: 1,\n            ease: \"power2.out\"\n        });\n    });\n\n\n    // --- 4. АНИМАЦИИ СЕКЦИЙ (Циклы forEach) ---\n\n    // Секция About (Картинка с газетным эффектом)\n    gsap.from('.about__img-wrapper', {\n        scrollTrigger: {\n            trigger: '.about',\n            start: \"top 70%\",\n        },\n        opacity: 0,\n        scale: 0.95,\n        duration: 1.5,\n        ease: \"expo.out\"\n    });\n\n    // Карточки Практик (Гарантированная подгрузка всех элементов)\n    const practiceCards = document.querySelectorAll('.practice-card');\n    practiceCards.forEach((card, index) => {\n        gsap.from(card, {\n            scrollTrigger: {\n                trigger: card,\n                start: \"top 90%\",\n            },\n            opacity: 0,\n            y: 50,\n            duration: 0.8,\n            ease: \"power2.out\",\n            delay: index % 3 * 0.1 // Stagger внутри ряда\n        });\n    });\n\n    // Секция Обучение (Шаги)\n    const eduSteps = document.querySelectorAll('.edu-step');\n    eduSteps.forEach((step, index) => {\n        gsap.from(step, {\n            scrollTrigger: {\n                trigger: step,\n                start: \"top 95%\",\n            },\n            opacity: 0,\n            x: -20,\n            duration: 0.8,\n            ease: \"power2.out\",\n            delay: index * 0.1\n        });\n    });\n\n    // Блог\n    const blogPosts = document.querySelectorAll('.blog-entry');\n    blogPosts.forEach((post) => {\n        gsap.from(post, {\n            scrollTrigger: {\n                trigger: post,\n                start: \"top 95%\",\n            },\n            opacity: 0,\n            y: 20,\n            duration: 0.8\n        });\n    });\n\n\n    // --- 5. ФОРМА КОНТАКТОВ И КАПЧА ---\n\n    // Ограничение ввода в телефон\n    const phoneInput = document.getElementById('phone');\n    phoneInput?.addEventListener('input', (e) => {\n        e.target.value = e.target.value.replace(/\\D/g, '');\n    });\n\n    // Генерация капчи\n    const captchaQ = document.getElementById('captcha-question');\n    const n1 = Math.floor(Math.random() * 10);\n    const n2 = Math.floor(Math.random() * 5);\n    const captchaSum = n1 + n2;\n\n    if (captchaQ) {\n        captchaQ.innerText = `${n1} + ${n2} = `;\n    }\n\n    const contactForm = document.getElementById('contact-form');\n    const formMsg = document.getElementById('form-message');\n\n    contactForm?.addEventListener('submit', (e) => {\n        e.preventDefault();\n        const userAns = parseInt(document.getElementById('captcha-answer').value);\n        \n        if (userAns !== captchaSum) {\n            showMessage(\"Неверный результат капчи\", \"var(--color-accent)\");\n            return;\n        }\n\n        showMessage(\"Минутку, отправляем...\", \"var(--color-text)\");\n\n        // AJAX имитация\n        setTimeout(() => {\n            showMessage(\"Готово! Мы свяжемся с вами в ближайшее время.\", \"green\");\n            contactForm.reset();\n        }, 1500);\n    });\n\n    function showMessage(text, color) {\n        if (formMsg) {\n            formMsg.innerText = text;\n            formMsg.style.color = color;\n            formMsg.style.display = \"block\";\n        }\n    }\n\n\n    // --- 6. COOKIE POPUP ---\n\n    const cookiePopup = document.getElementById('cookie-popup');\n    const cookieBtn = document.getElementById('cookie-accept');\n\n    if (!localStorage.getItem('velaro_cookies_accepted')) {\n        setTimeout(() => {\n            if (cookiePopup) cookiePopup.style.display = 'flex';\n        }, 3000);\n    }\n\n    cookieBtn?.addEventListener('click', () => {\n        localStorage.setItem('velaro_cookies_accepted', 'true');\n        cookiePopup.style.display = 'none';\n    });\n\n\n    // --- 7. HEADER SCROLL EFFECT ---\n\n    window.addEventListener('scroll', () => {\n        const header = document.querySelector('.header');\n        if (window.scrollY > 50) {\n            header.classList.add('header--scrolled');\n        } else {\n            header.classList.remove('header--scrolled');\n        }\n    });\n\n});"],"names":["lenis","t","raf","time","burger","nav","navLinks","body","toggleMenu","isActive","link","title","text","card","index","step","post","phoneInput","captchaQ","n1","n2","captchaSum","contactForm","formMsg","showMessage","color","cookiePopup","cookieBtn","header"],"mappings":"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"}